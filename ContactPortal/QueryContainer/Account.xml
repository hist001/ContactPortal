<?xml version="1.0" encoding="euc-kr"?>
<sql>
    <sql-mapping  id="AC_031"   value-count="0" url="공통코드 조회" >  
	<sql-content>
	<![CDATA[
	        SELECT LEVEL AS LEV,
                A.ACCTCD,
                A.ACCTKNAME,
                A.ACCTENAME,
                        (SELECT COUNT(*)
                        FROM ACCTTB B
                        WHERE B.HIGHACCTCD=A.ACCTCD)
                AS SUBCNT,
                A.NOTE,
                A.HIGHACCTCD,
                        (SELECT ACCTKNAME
                        FROM ACCTTB B
                        WHERE A.HIGHACCTCD=B.ACCTCD)
                AS HIGHCODENAME,
                A.ACCTMETHOD,
                A.ACCTEABBR
			FROM ACCTTB A
			WHERE LEVEL<='2'
			AND ACCTCD LIKE '%'||[S_ACCTCD]||'%'
			AND ACCTKNAME LIKE '%'||[S_ACCTKNAME]||'%'
			START WITH (A.ACCTCD LIKE '%'||DECODE([S_HIGHCODE],'','0000',decode(substr([S_HIGHCODE],2,4),'0000','0000',[S_HIGHCODE]))||'%')
			CONNECT BY PRIOR A.ACCTCD=A.HIGHACCTCD
			ORDER SIBLINGS BY A.ACCTCD

	]]>
	</sql-content>
	</sql-mapping>
	
	<sql-mapping  id="AC_032"   value-count="0" url="공통코드 세부조회" >  
	<sql-content>
	<![CDATA[
		        SELECT LEVEL AS LEV,
                A.ACCTCD,
                A.ACCTKNAME,
                A.ACCTENAME,
                        (SELECT COUNT(*)
                        FROM ACCTTB B
                        WHERE B.HIGHACCTCD=A.ACCTCD)
                AS SUBCNT,
                A.NOTE,
                A.HIGHACCTCD,
                        (SELECT ACCTKNAME
                        FROM ACCTTB B
                        WHERE A.HIGHACCTCD=B.ACCTCD)
                AS HIGHCODENAME,
                A.ACCTMETHOD,
                A.ACCTEABBR
		FROM ACCTTB A
		WHERE LEVEL=1
		START WITH A.HIGHACCTCD =S_HIGHCODE:
		CONNECT BY PRIOR A.ACCTCD=A.HIGHACCTCD
		ORDER SIBLINGS BY A.ACCTCD
	]]>
	</sql-content>
	</sql-mapping>
	
		<sql-mapping  id="AC_033"   value-count="0" url="공통 코드 [등록]" >  
	<sql-content>
	<![CDATA[
		INSERT INTO ACCTTB(ACCTCD, ACCTKNAME, HIGHACCTCD)
		VALUES 
		([ACCTCD],[ACCTKNAME],[HIGHACCTCD])
	]]>
	</sql-content>
	</sql-mapping>

	<sql-mapping  id="AC_034"   value-count="7" url="공통 코드 [수정]" >  
	<sql-content>
	<![CDATA[
		UPDATE ACCTTB SET	 
			ACCTCD = [ACCTCD],
			ACCTKNAME=[ACCTKNAME],
			ACCTENAME=[ACCTENAME],
			ACCTMETHOD=[ACCTMETHOD],
			NOTE=[NOTE],
			ACCTEABBR=[ACCTEABBR],
			HIGHACCTCD=[HIGHACCTCD]
		WHERE ACCTCD = [S_ACCTCD_SAVE]
		
	]]>
	</sql-content>
	</sql-mapping>

	<sql-mapping  id="AC_035"   value-count="1" url="공통 코드 [삭제]" >  
	<sql-content>
	<![CDATA[
		DELETE FROM ACCTTB
		WHERE ACCTCD = [ACCTCD]
	]]>
	</sql-content>
	</sql-mapping>

	<sql-mapping  id="AC_036"   value-count="0" url="재무접수_TBAA01" >  
	<sql-content>
	<![CDATA[
			INSERT INTO TBTEMP
			SELECT
				 MAX(TEMP_TAG   )
				,MAX(TEMP_ILJA  )
				,MAX(TEMP_JPNO  )
				,MAX(TEMP_JPIJ  )
				,MAX(TEMP_BSCD  )
				,MAX(TEMP_PRJT  )
				,MAX(TEMP_SBCD  )
				,MAX(TEMP_CUST  )
				,MAX(TEMP_SUNO  )
				,MAX(TEMP_YSGB  )
				,MAX(TEMP_TXCD  )
				,MAX(TEMP_PRGB  )
				,MAX(TEMP_TAMT  )
				,MAX(TEMP_TTAX  )
				,MAX(TEMP_GGBN  )
				,MAX(TEMP_BLCD1 )
				,MAX(TEMP_DPJT1 )
				,NVL(MAX(TEMP_DAMT1 ),0)
				,MAX(TEMP_GJCD1 )
				,MAX(TEMP_NAYK1 )
				,MAX(TEMP_CDGB1 )
				,MAX(TEMP_RFNO1 )
				,MAX(TEMP_BLCD2 )
				,MAX(TEMP_DPJT2 )
				,NVL(MAX(TEMP_DAMT2 ),0)
				,MAX(TEMP_GJCD2 )
				,MAX(TEMP_NAYK2 )
				,MAX(TEMP_CDGB2 )
				,MAX(TEMP_RFNO2 )
				,MAX(TEMP_BLCD3 )
				,MAX(TEMP_DPJT3 )
				,NVL(MAX(TEMP_DAMT3 ),0)
				,MAX(TEMP_GJCD3 )
				,MAX(TEMP_NAYK3 )
				,MAX(TEMP_CDGB3 )
				,MAX(TEMP_RFNO3 )
				,MAX(TEMP_BLCD4 )
				,MAX(TEMP_DPJT4 )
				,NVL(MAX(TEMP_DAMT4 ),0)
				,MAX(TEMP_GJCD4 )
				,MAX(TEMP_NAYK4 )
				,MAX(TEMP_CDGB4 )
				,MAX(TEMP_RFNO4 )
				,MAX(TEMP_BLCD5 )
				,MAX(TEMP_DPJT5 )
				,NVL(MAX(TEMP_DAMT5 ),0)
				,MAX(TEMP_GJCD5 )
				,MAX(TEMP_NAYK5 )
				,MAX(TEMP_CDGB5 )
				,MAX(TEMP_RFNO5 )
				,MAX(TEMP_BLCD6 )
				,MAX(TEMP_DPJT6 )
				,NVL(MAX(TEMP_DAMT6 ),0)
				,MAX(TEMP_GJCD6 )
				,MAX(TEMP_NAYK6 )
				,MAX(TEMP_CDGB6 )
				,MAX(TEMP_RFNO6 )
				,MAX(TEMP_BLCD7 )
				,MAX(TEMP_DPJT7 )
				,NVL(MAX(TEMP_DAMT7 ),0)
				,MAX(TEMP_GJCD7 )
				,MAX(TEMP_NAYK7 )
				,MAX(TEMP_CDGB7 )
				,MAX(TEMP_RFNO7 )
				,MAX(TEMP_BLCD8 )
				,MAX(TEMP_DPJT8 )
				,NVL(MAX(TEMP_DAMT8 ),0)
				,MAX(TEMP_GJCD8 )
				,MAX(TEMP_NAYK8 )
				,MAX(TEMP_CDGB8 )
				,MAX(TEMP_RFNO8 )
				,''TEMP_BLCD9
				,''TEMP_DPJT9
				,0 TEMP_DAMT9
				,''TEMP_GJCD9
				,''TEMP_NAYK9
				,''TEMP_CDGB9
				,''TEMP_RFNO9
				,''TEMP_BLCD10
				,''TEMP_DPJT10
				,0 TEMP_DAMT10
				,''TEMP_GJCD10
				,''TEMP_NAYK10
				,''TEMP_CDGB10
				,''TEMP_RFNO10
				,MAX(TEMP_DATE  )
				,MAX(TEMP_TIME  )
				,MAX(TEMP_CONTS )
				,MAX(TEMP_JIAMT )
				,MAX(TEMP_SIAMT )
				,MAX(TEMP_ORDER )
				,MAX(TEMP_GMJ1  )
				,MAX(TEMP_GMJ2  )
				,MAX(TEMP_GMJ3  )
				,MAX(TEMP_GMJ4  )
				,MAX(TEMP_GMJ5  )
				,MAX(TEMP_GMJ6  )
				,MAX(TEMP_GMJ7  )
				,MAX(TEMP_SDNO1 )
				,MAX(TEMP_SDNO2 )
				,MAX(TEMP_SDNO3 )
				,MAX(TEMP_SDNO4 )
				,MAX(TEMP_SDNO5 )
				,MAX(TEMP_SDNO6 )
				,MAX(TEMP_SDNO7 )
				,MAX(TEMP_OWN1  )
				,MAX(TEMP_OWN2  )
				,MAX(TEMP_OWN3  )
				,MAX(TEMP_OWN4  )
				,MAX(TEMP_OWN5  )
				,MAX(TEMP_OWN6  )
				,MAX(TEMP_OWN7  )
			
			FROM (
			   SELECT
				NULL AS TEMP_TAG
				,TO_CHAR(SYSDATE,'YYYYMMDD') AS TEMP_ILJA
				,A.DOCNO AS TEMP_JPNO
				,A.EVENTDT AS TEMP_JPIJ
				,E.ORGCD AS TEMP_BSCD
				,'' AS TEMP_PRJT
				,USEEMPID AS TEMP_SBCD
				,BIZACQACCTCD AS TEMP_CUST
				,AZ25_SUPJA_NO AS TEMP_SUNO
				,DOMICILE AS TEMP_YSGB
				,VATTYPE AS TEMP_TXCD
				,BILLTYPE AS TEMP_PRGB
				,NVL(SUPPLYAMT,0) AS TEMP_TAMT
				,NVL(TAXAMT,0) AS TEMP_TTAX
				,'' AS TEMP_GGBN
				,DECODE(ROWNUM,1,D.ORGCD)  AS TEMP_BLCD1, DECODE(ROWNUM,1,C.ORGCD)  AS TEMP_DPJT1, DECODE(ROWNUM,1,AMOUNT)  AS TEMP_DAMT1, DECODE(ROWNUM,1,ACCTCD) AS TEMP_GJCD1,  DECODE(ROWNUM,1,B.TITLE) AS TEMP_NAYK1,   DECODE(ROWNUM,1,CDTYPE) AS TEMP_CDGB1, DECODE(ROWNUM,1,CDAPPLNO) AS TEMP_RFNO1
				,DECODE(ROWNUM,2,D.ORGCD)  AS TEMP_BLCD2, DECODE(ROWNUM,2,C.ORGCD)  AS TEMP_DPJT2, DECODE(ROWNUM,2,AMOUNT)  AS TEMP_DAMT2, DECODE(ROWNUM,2,ACCTCD) AS TEMP_GJCD2,  DECODE(ROWNUM,2,B.TITLE) AS TEMP_NAYK2,	DECODE(ROWNUM,2,CDTYPE) AS TEMP_CDGB2, DECODE(ROWNUM,2,CDAPPLNO) AS TEMP_RFNO2
				,DECODE(ROWNUM,3,D.ORGCD)  AS TEMP_BLCD3, DECODE(ROWNUM,3,C.ORGCD)  AS TEMP_DPJT3, DECODE(ROWNUM,3,AMOUNT)  AS TEMP_DAMT3, DECODE(ROWNUM,3,ACCTCD) AS TEMP_GJCD3,  DECODE(ROWNUM,3,B.TITLE) AS TEMP_NAYK3,	DECODE(ROWNUM,3,CDTYPE) AS TEMP_CDGB3, DECODE(ROWNUM,3,CDAPPLNO) AS TEMP_RFNO3
				,DECODE(ROWNUM,4,D.ORGCD)  AS TEMP_BLCD4, DECODE(ROWNUM,4,C.ORGCD)  AS TEMP_DPJT4, DECODE(ROWNUM,4,AMOUNT)  AS TEMP_DAMT4, DECODE(ROWNUM,4,ACCTCD) AS TEMP_GJCD4,  DECODE(ROWNUM,4,B.TITLE) AS TEMP_NAYK4,	DECODE(ROWNUM,4,CDTYPE) AS TEMP_CDGB4, DECODE(ROWNUM,4,CDAPPLNO) AS TEMP_RFNO4
				,DECODE(ROWNUM,5,D.ORGCD)  AS TEMP_BLCD5, DECODE(ROWNUM,5,C.ORGCD)  AS TEMP_DPJT5, DECODE(ROWNUM,5,AMOUNT)  AS TEMP_DAMT5, DECODE(ROWNUM,5,ACCTCD) AS TEMP_GJCD5,  DECODE(ROWNUM,5,B.TITLE) AS TEMP_NAYK5,	DECODE(ROWNUM,5,CDTYPE) AS TEMP_CDGB5, DECODE(ROWNUM,5,CDAPPLNO) AS TEMP_RFNO5
				,DECODE(ROWNUM,6,D.ORGCD)  AS TEMP_BLCD6, DECODE(ROWNUM,6,C.ORGCD)  AS TEMP_DPJT6, DECODE(ROWNUM,6,AMOUNT)  AS TEMP_DAMT6, DECODE(ROWNUM,6,ACCTCD) AS TEMP_GJCD6,  DECODE(ROWNUM,6,B.TITLE) AS TEMP_NAYK6,	DECODE(ROWNUM,6,CDTYPE) AS TEMP_CDGB6, DECODE(ROWNUM,6,CDAPPLNO) AS TEMP_RFNO6
				,DECODE(ROWNUM,7,D.ORGCD)  AS TEMP_BLCD7, DECODE(ROWNUM,7,C.ORGCD)  AS TEMP_DPJT7, DECODE(ROWNUM,7,AMOUNT)  AS TEMP_DAMT7, DECODE(ROWNUM,7,ACCTCD) AS TEMP_GJCD7,  DECODE(ROWNUM,7,B.TITLE) AS TEMP_NAYK7,	DECODE(ROWNUM,7,CDTYPE) AS TEMP_CDGB7, DECODE(ROWNUM,7,CDAPPLNO) AS TEMP_RFNO7
				,DECODE(ROWNUM,8,D.ORGCD)  AS TEMP_BLCD8, DECODE(ROWNUM,8,C.ORGCD)  AS TEMP_DPJT8, DECODE(ROWNUM,8,AMOUNT)  AS TEMP_DAMT8, DECODE(ROWNUM,8,ACCTCD) AS TEMP_GJCD8,  DECODE(ROWNUM,8,B.TITLE) AS TEMP_NAYK8,	DECODE(ROWNUM,8,CDTYPE) AS TEMP_CDGB8, DECODE(ROWNUM,8,CDAPPLNO) AS TEMP_RFNO8
			,RECIVEDT AS TEMP_DATE
			,TO_CHAR(SYSDATE,'HH24MISS') AS TEMP_TIME
			,SUBSTRB(MTITLE,1,200) AS TEMP_CONTS
			,TOTAMT AS TEMP_JIAMT
			,REALAMT AS TEMP_SIAMT
			,'' AS TEMP_ORDER
			,DECODE(ROWNUM,1,BIZNAME)  AS TEMP_GMJ1, DECODE(ROWNUM,2,BIZNAME) AS TEMP_GMJ2, DECODE(ROWNUM,3,BIZNAME) AS TEMP_GMJ3, DECODE(ROWNUM,4,BIZNAME) AS TEMP_GMJ4, DECODE(ROWNUM,5,BIZNAME) AS TEMP_GMJ5, DECODE(ROWNUM,6,BIZNAME) AS TEMP_GMJ6, DECODE(ROWNUM,7,BIZNAME) AS TEMP_GMJ7
			,DECODE(ROWNUM,1,BIZREGNO) AS TEMP_SDNO1,DECODE(ROWNUM,2,BIZREGNO)AS TEMP_SDNO2,DECODE(ROWNUM,3,BIZREGNO)AS TEMP_SDNO3,DECODE(ROWNUM,4,BIZREGNO)AS TEMP_SDNO4,DECODE(ROWNUM,5,BIZREGNO)AS TEMP_SDNO5,DECODE(ROWNUM,6,BIZREGNO)AS TEMP_SDNO6,DECODE(ROWNUM,7,BIZREGNO)AS TEMP_SDNO7
			,DECODE(ROWNUM,1,CEONAME)  AS TEMP_OWN1, DECODE(ROWNUM,2,CEONAME) AS TEMP_OWN2, DECODE(ROWNUM,3,CEONAME) AS TEMP_OWN3, DECODE(ROWNUM,4,CEONAME) AS TEMP_OWN4, DECODE(ROWNUM,5,CEONAME) AS TEMP_OWN5, DECODE(ROWNUM,6,CEONAME) AS TEMP_OWN6, DECODE(ROWNUM,7,CEONAME) AS TEMP_OWN7
			FROM ACCTRPTHD A,
			     ACCTRPTSB B,
			     ORG C,
			     ORG D,
			     ORG E,
			     TBAZ25@TO_INHAUH F
			WHERE A.MAINNO= B.MAINNO
			AND A.MAINNO  =  [MAINNO]
			AND A.DELFLAG = 'N'
			AND A.CRORGCD = C.ORG_NO(+)
			AND B.ORGCD   = D.ORG_NO(+)
			AND A.USEORGCD= E.ORG_NO(+)
			AND A.BIZACQACCTCD=F.AZ25_CUST_CD(+)
			)   
	]]>
	</sql-content>
	</sql-mapping>
	<sql-mapping  id="AC_037"   value-count="0" url="재무접수_상태변경" >  
	<sql-content>
	<![CDATA[
		UPDATE  ACCTRPTHD SET
		STATUS =[STATUS]
		WHERE MAINNO=[MAINNO]
	]]>
	</sql-content>
	</sql-mapping>
</sql>