<?xml version="1.0" encoding="euc-kr"?>
<sql>
   <sql-mapping  id="SubsidyList_N"   value-count="0" url="급식비 사용현황 LIST" >  
   <sql-content>
   <![CDATA[
		select 	DOCNO,MAINNO,EVENTDT,ORGDIV,ORGDIVCD,
		ORGCD,ORGNAME,USEEMPID,EMPKNAME,
		ACCTCD,ACCTNAME,MTITLE,
		TO_CHAR(AMOUNT,'999,999,999,999') AMOUNT,
		TO_CHAR(SUM(AMOUNT) OVER(),'999,999,999,999') AS TOTAMT
		from
		(
		                select a.DOCNO,a.MAINNO,
		                           SUBSTR(a.EVENTDT,1,4)||'-'||SUBSTR(a.EVENTDT,5,2)||'-'||SUBSTR(a.EVENTDT,7,2) EVENTDT,
		                           get_orgdiv(a.crorgcd) ORGDIV,
		                           decode(get_orgdiv(a.crorgcd),'1007','공간정보','1008','SI','1009','IT부문','1010','경영지원') ORGDIVCD,
		                           b.JOBNO, to_orgnocd2(b.jobno) ORGCD,substrb(to_orgnoname2(b.jobno),1,34) ORGNAME,
		                           a.USEEMPID,to_empkname(a.useempid) EMPKNAME,
		                           b.ACCTCD, 
		                            decode(b.acctcd,'50261','접대비','50263','접대비','50264','접대비','50265','접대비_경조비','50266','접대비_경조비','50991','잡비','50159','급식비','50151','야근식대') ACCTNAME,
		                           --b.ACCTCD, to_acctname_n(b.acctcd,a.EVENTDT) ACCTNAME,
		                           sum(b.amount) AMOUNT,
		                           --TO_CHAR(b.AMOUNT,'999,999,999,999') AMOUNT,
		                           --TO_CHAR(SUM(b.AMOUNT) OVER(),'999,999,999,999') AS TOTAMT,
		                           substrb(a.MTITLE,1,52) MTITLE
		                from acctrpthd a, acctrptsb b
		                where a.mainno = b.mainno
		                and a.status in ('DD1','DE0')
		                and a.crOrgCd   in(
		                                 SELECT to_char(ORG_NO)
		                                 FROM ORG A
		                                 CONNECT BY A.HIGHORGCD = PRIOR to_char(A.ORG_no)
		                                 START WITH A.ORG_NO = ORGDIV:
		                 )
		                and eventdt between REPLACE(FR_YYMM:,'-','') and REPLACE(TO_YYMM:,'-','')
		                group by a.DOCNO,a.MAINNO, a.EVENTDT, a.crorgcd, b.JOBNO, a.USEEMPID,b.ACCTCD,a.MTITLE
		) c
		where acctcd like ACCTCD:||'%'
		and acctcd in ('50151','50159','50991','50261','50263','50264')
		and decode(AMT:,'A',AMOUNT,'50000')<= 50000
		and decode(AMT:,'B',AMOUNT,'50000')>= 50000
		and decode(AMT:,'C',AMOUNT,'100000')>= 100000
		order by EVENTDT desc
	]]>
	</sql-content>
   </sql-mapping>
   <sql-mapping  id="SubsidyList"   value-count="0" url="급식비 사용현황 LIST" >  
   <sql-content>
   <![CDATA[
		select 	DOCNO,MAINNO,EVENTDT,ORGDIV,ORGDIVCD,
		ORGCD,ORGNAME,USEEMPID,EMPKNAME,
		ACCTCD,ACCTNAME,MTITLE,
		TO_CHAR(AMOUNT,'999,999,999,999') AMOUNT,
		TO_CHAR(SUM(AMOUNT) OVER(),'999,999,999,999') AS TOTAMT
		from
		(
		                select a.DOCNO,a.MAINNO,
		                           SUBSTR(a.EVENTDT,1,4)||'-'||SUBSTR(a.EVENTDT,5,2)||'-'||SUBSTR(a.EVENTDT,7,2) EVENTDT,
		                           get_orgdiv(a.crorgcd) ORGDIV,
		                           decode(get_orgdiv(a.crorgcd),'1007','GIS','1008','SI','1009','ITO','1010','경영') ORGDIVCD,
		                           b.JOBNO, to_orgnocd2(b.jobno) ORGCD,substrb(to_orgnoname2(b.jobno),1,34) ORGNAME,
		                           a.USEEMPID,to_empkname(a.useempid) EMPKNAME,
		                           b.ACCTCD, to_acctname(b.acctcd) ACCTNAME,
		                           --b.ACCTCD, to_acctname_n(b.acctcd,a.EVENTDT) ACCTNAME,
		                           sum(b.amount) AMOUNT,
		                           --TO_CHAR(b.AMOUNT,'999,999,999,999') AMOUNT,
		                           --TO_CHAR(SUM(b.AMOUNT) OVER(),'999,999,999,999') AS TOTAMT,
		                           substrb(a.MTITLE,1,52) MTITLE
		                from acctrpthd a, acctrptsb b
		                where a.mainno = b.mainno
		                and b.acctcd like ACCTCD:||'%'
		                and a.status in ('DD1','DE0')
		                and a.crOrgCd   in(
		                                 SELECT to_char(ORG_NO)
		                                 FROM ORG A
		                                 CONNECT BY A.HIGHORGCD = PRIOR to_char(A.ORG_no)
		                                 START WITH A.ORG_NO = ORGDIV:
		                 )
		                and eventdt between REPLACE(FR_YYMM:,'-','') and REPLACE(TO_YYMM:,'-','')
		                --and a.supplyamt > 50000
		                group by a.DOCNO,a.MAINNO, a.EVENTDT, a.crorgcd, b.JOBNO, a.USEEMPID,b.ACCTCD,a.MTITLE
		)
		where amount > 50000
		order by EVENTDT desc
	]]>
	</sql-content>
   </sql-mapping>
   <sql-mapping  id="SubsidyList_back"   value-count="0" url="급식비 사용현황 LIST" >  
   <sql-content>
   <![CDATA[
		select a.DOCNO,a.MAINNO, 
			   SUBSTR(a.EVENTDT,1,4)||'-'||SUBSTR(a.EVENTDT,5,2)||'-'||SUBSTR(a.EVENTDT,7,2) EVENTDT,
			   get_orgdiv(a.crorgcd) ORGDIV,
			   decode(get_orgdiv(a.crorgcd),'1007','GIS','1008','SI','1009','ITO','1010','경영') ORGDIVCD,
			   b.JOBNO, to_orgnocd2(b.jobno) ORGCD,substrb(to_orgnoname2(b.jobno),1,38) ORGNAME,
			   a.USEEMPID,to_empkname(a.useempid) EMPKNAME,
			   b.ACCTCD, to_acctname(b.acctcd) ACCTNAME, 
			   --b.ACCTCD, to_acctname_n(b.acctcd,a.EVENTDT) ACCTNAME,
			   TO_CHAR(b.AMOUNT,'999,999,999,999') AMOUNT,
			   TO_CHAR(SUM(b.AMOUNT) OVER(),'999,999,999,999') AS TOTAMT,
			   substrb(a.MTITLE,1,52) MTITLE   
		from acctrpthd a, acctrptsb b
		where a.mainno = b.mainno
		and b.acctcd like ACCTCD:||'%'
		and a.status in ('DD1','DE0')
		and a.crOrgCd   in(
		                 SELECT to_char(ORG_NO)
		                 FROM ORG A
		                 CONNECT BY A.HIGHORGCD = PRIOR to_char(A.ORG_no)
		                 START WITH A.ORG_NO = ORGDIV:
		 )
		and eventdt between REPLACE(FR_YYMM:,'-','') and REPLACE(TO_YYMM:,'-','')
		and a.supplyamt > 50000
		order by a.EVENTDT desc
	]]>
	</sql-content>
   </sql-mapping>
   <sql-mapping  id="PayDocList"   value-count="0"
   url="지급품의 LIST" >  
   <sql-content>
   <![CDATA[
	SELECT  MAINNO, DOCNO, DOCTYPE, PAYTYPE, USEORGCD, USEORGNAME, MTITLE, EVENTDT, USEEMPID, TO_EMPKNAME(USEEMPID) USEEMPNAME, TO_empgradename(USEEMPID) USEEMPGrade,
        PHONNO, BIZACQACCTCD, TO_BIZACQACCTNAME(BIZACQACCTCD) BIZACQNAME, BIZACQREGNO, DOMICILE, STATUS, TO_STATUSNM(STATUS) STATUSNAME,
        TOTAMT, SUPPLYAMT, TAXAMT, REALAMT, DIFFAMT, PCARDYN, BILLTYPE, DETAILTYPE, DETAIL,
        ADVANCECLASS, SUPPLYAMTCLASS, RECIVEDT, OUTSOURCETYPE, 
		CONTENTS1, QUANTITY1, UNITCOST1, SUPPLYAMT1, TAXAMT1,
        CONTENTS2, QUANTITY2, UNITCOST2, SUPPLYAMT2, TAXAMT2,
        CONTENTS3, QUANTITY3, UNITCOST3, SUPPLYAMT3, TAXAMT3,
        CONTENTS4, QUANTITY4, UNITCOST4, SUPPLYAMT4, TAXAMT4,
        TO_CHAR(CREATEDTM,'YYYY-MM-DD HH24:mi:ss') CREATEDTM, CREMPID, TO_EMPKNAME(CREMPID) CREMPNAME, 
        TO_empgradename(CREMPID) CREMPGrade, CRORGCD, TO_ORGCDNAME(CRORGCD) CRORGNAME,
        to_orgnocd(CRORGCD) crOrgUserCd, to_orgnocd(useORGCD) useOrgUserCd
	 FROM  MASM_INHAUH.ACCTRPTHD
	 WHERE STATUS in ('DA0','DB0')
	 AND DocType = 'B'
	]]>
	</sql-content>
   </sql-mapping>
   <sql-mapping  id="AcceptDocList"   value-count="0"
   url="결재 승인완료 품의서 LIST" >  
   <sql-content>
   <![CDATA[
SELECT  MAINNO, DOCNO, DOCTYPE, PAYTYPE, USEORGCD, USEORGNAME, MTITLE, EVENTDT, USEEMPID, TO_EMPKNAME(USEEMPID) USEEMPNAME, TO_empgradename(USEEMPID) USEEMPGrade,
        PHONNO, BIZACQACCTCD, TO_BIZACQACCTNAME(BIZACQACCTCD) BIZACQNAME, BIZACQREGNO, DOMICILE, STATUS, TO_STATUSNM(STATUS) STATUSNAME,
        TOTAMT, SUPPLYAMT, TAXAMT, REALAMT, DIFFAMT, PCARDYN, BILLTYPE, DETAILTYPE, DETAIL,
        ADVANCECLASS, SUPPLYAMTCLASS, RECIVEDT, OUTSOURCETYPE, 
		CONTENTS1, QUANTITY1, UNITCOST1, SUPPLYAMT1, TAXAMT1,
        CONTENTS2, QUANTITY2, UNITCOST2, SUPPLYAMT2, TAXAMT2,
        CONTENTS3, QUANTITY3, UNITCOST3, SUPPLYAMT3, TAXAMT3,
        CONTENTS4, QUANTITY4, UNITCOST4, SUPPLYAMT4, TAXAMT4,
        TO_CHAR(CREATEDTM,'YYYY-MM-DD HH24:mi:ss') CREATEDTM, CREMPID, TO_EMPKNAME(CREMPID) CREMPNAME, 
        TO_empgradename(CREMPID) CREMPGrade, CRORGCD, TO_ORGCDNAME(CRORGCD) CRORGNAME,
        to_orgnocd(CRORGCD) crOrgUserCd, to_orgnocd(useORGCD) useOrgUserCd
 FROM  MASM_INHAUH.ACCTRPTHD
 WHERE STATUS = 'DD1'
	]]>
	</sql-content>
   </sql-mapping>
   <sql-mapping  id="ReAcceptDocList"   value-count="0"
   url="재무 재접수 품의서 LIST" >  
   <sql-content>
   <![CDATA[
SELECT  MAINNO, DOCNO, DOCTYPE, PAYTYPE, USEORGCD, USEORGNAME, MTITLE, EVENTDT, USEEMPID, TO_EMPKNAME(USEEMPID) USEEMPNAME, TO_empgradename(USEEMPID) USEEMPGrade,
        PHONNO, BIZACQACCTCD, TO_BIZACQACCTNAME(BIZACQACCTCD) BIZACQNAME, BIZACQREGNO, DOMICILE, STATUS, TO_STATUSNM(STATUS) STATUSNAME,
        TOTAMT, SUPPLYAMT, TAXAMT, REALAMT, DIFFAMT, PCARDYN, BILLTYPE, DETAILTYPE, DETAIL,
        ADVANCECLASS, SUPPLYAMTCLASS, RECIVEDT, OUTSOURCETYPE, 
		CONTENTS1, QUANTITY1, UNITCOST1, SUPPLYAMT1, TAXAMT1,
        CONTENTS2, QUANTITY2, UNITCOST2, SUPPLYAMT2, TAXAMT2,
        CONTENTS3, QUANTITY3, UNITCOST3, SUPPLYAMT3, TAXAMT3,
        CONTENTS4, QUANTITY4, UNITCOST4, SUPPLYAMT4, TAXAMT4,
        TO_CHAR(CREATEDTM,'YYYY-MM-DD HH24:mi:ss') CREATEDTM, CREMPID, TO_EMPKNAME(CREMPID) CREMPNAME, 
        TO_empgradename(CREMPID) CREMPGrade, CRORGCD, TO_ORGCDNAME(CRORGCD) CRORGNAME,
        to_orgnocd(CRORGCD) crOrgUserCd, to_orgnocd(useORGCD) useOrgUserCd
 FROM  MASM_INHAUH.ACCTRPTHD
 WHERE STATUS = 'DE0'
	]]>
	</sql-content>
   </sql-mapping>
   <sql-mapping  id="ModDocList"   value-count="0"
   url="재무 품의서 수정  LIST" >  
   <sql-content>
   <![CDATA[
	SELECT  MAINNO, DOCNO, DOCTYPE, PAYTYPE, USEORGCD, USEORGNAME, MTITLE, EVENTDT, USEEMPID, TO_EMPKNAME(USEEMPID) USEEMPNAME, 
			TO_empgradename(USEEMPID) USEEMPGrade,
	        PHONNO, BIZACQACCTCD, TO_BIZACQACCTNAME(BIZACQACCTCD) BIZACQNAME, BIZACQREGNO, DOMICILE, STATUS, 
	        TO_STATUSNM(STATUS) STATUSNAME,
	        TOTAMT, SUPPLYAMT, TAXAMT, REALAMT, DIFFAMT, PCARDYN, BILLTYPE, DETAILTYPE, DETAIL,
	        ADVANCECLASS, SUPPLYAMTCLASS, RECIVEDT, OUTSOURCETYPE, 
			CONTENTS1, QUANTITY1, UNITCOST1, SUPPLYAMT1, TAXAMT1,
	        CONTENTS2, QUANTITY2, UNITCOST2, SUPPLYAMT2, TAXAMT2,
	        CONTENTS3, QUANTITY3, UNITCOST3, SUPPLYAMT3, TAXAMT3,
	        CONTENTS4, QUANTITY4, UNITCOST4, SUPPLYAMT4, TAXAMT4,
	        TO_CHAR(CREATEDTM,'YYYY-MM-DD HH24:mi:ss') CREATEDTM, CREMPID, TO_EMPKNAME(CREMPID) CREMPNAME, 
	        TO_empgradename(CREMPID) CREMPGrade, CRORGCD, TO_ORGCDNAME(CRORGCD) CRORGNAME,
	        to_orgnocd(CRORGCD) crOrgUserCd, to_orgnocd(useORGCD) useOrgUserCd
	 FROM  MASM_INHAUH.ACCTRPTHD
	 WHERE STATUS in ('DD1','DE0','DE1')
	]]>
	</sql-content>
   </sql-mapping>
   <sql-mapping  id="CompDocList"   value-count="0"
   url="재무 접수 완료 품의 조회 LIST" >  
   <sql-content>
   <![CDATA[
SELECT  MAINNO, DOCNO, DOCTYPE, PAYTYPE, USEORGCD, USEORGNAME, MTITLE, EVENTDT, USEEMPID, TO_EMPKNAME(USEEMPID) USEEMPNAME, TO_empgradename(USEEMPID) USEEMPGrade,
        PHONNO, BIZACQACCTCD, TO_BIZACQACCTNAME(BIZACQACCTCD) BIZACQNAME, BIZACQREGNO, DOMICILE, STATUS, TO_STATUSNM(STATUS) STATUSNAME,
        TOTAMT, SUPPLYAMT, TAXAMT, REALAMT, DIFFAMT, PCARDYN, BILLTYPE, DETAILTYPE, DETAIL,
        ADVANCECLASS, SUPPLYAMTCLASS, RECIVEDT, OUTSOURCETYPE, 
		CONTENTS1, QUANTITY1, UNITCOST1, SUPPLYAMT1, TAXAMT1,
        CONTENTS2, QUANTITY2, UNITCOST2, SUPPLYAMT2, TAXAMT2,
        CONTENTS3, QUANTITY3, UNITCOST3, SUPPLYAMT3, TAXAMT3,
        CONTENTS4, QUANTITY4, UNITCOST4, SUPPLYAMT4, TAXAMT4,
        TO_CHAR(CREATEDTM,'YYYY-MM-DD HH24:mi:ss') CREATEDTM, CREMPID, TO_EMPKNAME(CREMPID) CREMPNAME, 
        TO_empgradename(CREMPID) CREMPGrade, CRORGCD, TO_ORGCDNAME(CRORGCD) CRORGNAME,
        to_orgnocd(CRORGCD) crOrgUserCd, to_orgnocd(useORGCD) useOrgUserCd
 FROM  MASM_INHAUH.ACCTRPTHD
 WHERE STATUS = 'DE1'
	]]>
	</sql-content>
   </sql-mapping>
   <sql-mapping  id="RejectDocList"   value-count="0"
   url="재무 접수 부결 품의 조회 LIST" >  
   <sql-content>
   <![CDATA[
SELECT  MAINNO, DOCNO, DOCTYPE, PAYTYPE, USEORGCD, USEORGNAME, MTITLE, EVENTDT, USEEMPID, TO_EMPKNAME(USEEMPID) USEEMPNAME,TO_empgradename(USEEMPID) USEEMPGrade,
        PHONNO, BIZACQACCTCD, TO_BIZACQACCTNAME(BIZACQACCTCD) BIZACQNAME, BIZACQREGNO, DOMICILE, STATUS, TO_STATUSNM(STATUS) STATUSNAME,
        TOTAMT, SUPPLYAMT, TAXAMT, REALAMT, DIFFAMT, PCARDYN, BILLTYPE, DETAILTYPE, DETAIL,
        ADVANCECLASS, SUPPLYAMTCLASS, RECIVEDT, OUTSOURCETYPE, 
		CONTENTS1, QUANTITY1, UNITCOST1, SUPPLYAMT1, TAXAMT1,
        CONTENTS2, QUANTITY2, UNITCOST2, SUPPLYAMT2, TAXAMT2,
        CONTENTS3, QUANTITY3, UNITCOST3, SUPPLYAMT3, TAXAMT3,
        CONTENTS4, QUANTITY4, UNITCOST4, SUPPLYAMT4, TAXAMT4,
        TO_CHAR(CREATEDTM,'YYYY-MM-DD HH24:mi:ss') CREATEDTM, CREMPID, TO_EMPKNAME(CREMPID) CREMPNAME, 
        TO_empgradename(CREMPID) CREMPGrade, CRORGCD, TO_ORGCDNAME(CRORGCD) CRORGNAME,
        to_orgnocd(CRORGCD) crOrgUserCd, to_orgnocd(useORGCD) useOrgUserCd
 FROM  MASM_INHAUH.ACCTRPTHD
 WHERE STATUS = 'DW0'
	]]>
	</sql-content>
   </sql-mapping>
   <sql-mapping  id="PayDocList1"   value-count="0"
   url="지급품의 LIST" >  
   <sql-content>
   <![CDATA[
SELECT  MAINNO, DOCNO, DOCTYPE, PAYTYPE, USEORGCD, USEORGNAME, MTITLE, EVENTDT, USEEMPID, TO_EMPKNAME(USEEMPID) USEEMPNAME, TO_empgradename(USEEMPID) USEEMPGrade,
        PHONNO, BIZACQACCTCD, TO_BIZACQACCTNAME(BIZACQACCTCD) BIZACQNAME, BIZACQREGNO, DOMICILE, STATUS, TO_STATUSNM(STATUS) STATUSNAME,
        TOTAMT, SUPPLYAMT, TAXAMT, REALAMT, DIFFAMT, PCARDYN, BILLTYPE, DETAILTYPE, DETAIL,
        ADVANCECLASS, SUPPLYAMTCLASS, RECIVEDT, OUTSOURCETYPE, 
		CONTENTS1, QUANTITY1, UNITCOST1, SUPPLYAMT1, TAXAMT1,
        CONTENTS2, QUANTITY2, UNITCOST2, SUPPLYAMT2, TAXAMT2,
        CONTENTS3, QUANTITY3, UNITCOST3, SUPPLYAMT3, TAXAMT3,
        CONTENTS4, QUANTITY4, UNITCOST4, SUPPLYAMT4, TAXAMT4,
        TO_CHAR(CREATEDTM,'YYYY-MM-DD HH24:mi:ss') CREATEDTM, CREMPID, TO_EMPKNAME(CREMPID) CREMPNAME, 
        TO_empgradename(CREMPID) CREMPGrade, CRORGCD, TO_ORGCDNAME(CRORGCD) CRORGNAME,
        to_orgnocd(CRORGCD) crOrgUserCd, to_orgnocd(useORGCD) useOrgUserCd
 FROM  MASM_INHAUH.ACCTRPTHD
 WHERE STATUS in ('DC0','DD0')
	]]>
	</sql-content>
   </sql-mapping>
   <sql-mapping  id="LastBizAcq"   value-count="1"
   url="해당거래처" >  
   <sql-content>
   <![CDATA[
SELECT DISTINCT BIZACQCD, TO_BIZACQACCTNAME(BIZACQCD) BIZACQNAME, BIZCEONAME, sortingname,
       substr(BIZREGNO,1,3)||'-'||substr(BIZREGNO,4,2)||'-'||substr(BIZREGNO,6,5) BIZREGNO 
 FROM  MASM_INHAUH.V_LASTBZDAYINFO
 WHERE empid = ?
 order by 4
	]]>
	</sql-content>
   </sql-mapping>
   <sql-mapping  id="BizAcqList"   value-count="0"
   url="해당거래처1" >  
   <sql-content>
   <![CDATA[
SELECT BIZACQACCTCD BIZACQCD, BIZACQNAME, 
substr(BIZREGNO,1,3)||'-'||substr(BIZREGNO,4,2)||'-'||substr(BIZREGNO,6,5) BIZREGNO , BIZCEONAME
 FROM  MASM_INHAUH.BIZACQCORP
 WHERE BIZACQACCTCD IS NOT NULL
 AND BIZCURRFLAG = 'Y'
 	]]>
	</sql-content>
   </sql-mapping>
   <sql-mapping  id="PayHdKey"   value-count="2"
   url="지급품의 품의 Head 정보 등록" >  
   <sql-content>
   <![CDATA[
select 'B'||?||no as mainNo from 
(select Lpad(TO_CHAR(to_number(NVL(SUBSTR(MAX(mainNo),10,3),'0')) + 1), 3,'0') no 
from AcctRptHd where substr(mainNo,1,9) = 'B'||? Order by mainNo desc )
	]]>
	</sql-content>
   </sql-mapping>
   <sql-mapping  id="SearchFiles"   value-count="1"
   url="첨부파일 읽기" >  
   <sql-content>
   <![CDATA[
select * from FILEINFO 
 where MAINNO=?
	]]>
	</sql-content>
   </sql-mapping>
<sql-mapping  id="SearchFiles_DocNo"   value-count="1"
   url="첨부파일 읽기" >  
   <sql-content>
   <![CDATA[
select * from FILEINFO 
 where mainno=(select mainno from acctrpthd where docno = ?)
	]]>
	</sql-content>
   </sql-mapping>
   <sql-mapping  id="FileUpt"   value-count="3"
   url="첨부파일 읽기" >  
   <sql-content>
   <![CDATA[
where MAINNO=?
  and ?=?
 	]]>
	</sql-content>
   </sql-mapping>
   <sql-mapping  id="GetPayDoc"   value-count="1"
   url="지급품의 조회" >  
   <sql-content>
   <![CDATA[
  SELECT 
  a.CONF_NO, a.CONFTYPE,
  a.MAINNO, a.DOCNO, TO_CHAR(a.CREATEDTM,'YYYY-MM-DD HH24:mi:ss') CREATEDTM,
  (
  	 round(a.CREATEDTM-to_date(a.EVENTDT,'YYYYMMDD'))-
	  (
	        SELECT COUNT(C_DATE)
	        from CALENDAR
	        WHERE C_DATE LIKE TO_CHAR(a.CREATEDTM,'YYYY')||'%'
	        AND   C_DATE BETWEEN a.EVENTDT AND TO_CHAR(a.CREATEDTM,'YYYYMMDD')
	  )
  ) idays,
  a.CRORGCD, TO_ORGNONAME(a.CRORGCD) CRORGNAME, TO_ORGNOCD(a.CRORGCD) CRORGUSERCD,
  a.CREMPID,to_empGradeName(a.crEmpId) crEmpGrade, SUBSTR(a.EVENTDT,1,4)||'-'||SUBSTR(a.EVENTDT,5,2)||'-'||SUBSTR(a.EVENTDT,7,2) EVENTDT,  
  TO_EMPKNAME(a.CREMPID) CREMPNAME, 
  a.USEORGCD, TO_ORGNOCD2(a.USEORGCD) USEORGUSERCD, TO_ORGNONAME2(a.USEORGCD) USEORGNAME, 
  TO_empgradename(USEEMPID) USEEMPGrade,
  a.USEEMPID, TO_EMPKNAME(a.USEEMPID) USEEMPNAME, a.PHONNO, a.DOCTYPE, a.PAYTYPE, a.MTITLE, 
  a.STATUS, TO_STATUSNM(a.STATUS) STATUSNAME, a.BIZACQACCTCD, TO_BIZACQACCTNAME(a.BIZACQACCTCD) BIZACQNAME,
  TO_BIZACQCEONAME(a.BIZACQACCTCD) BIZCEONAME, a.BIZACQREGNO, a.DOMICILE, nvl(a.TOTAMT, 0) TOTAMT,  
  nvl(a.SUPPLYAMT, 0) SUPPLYAMT, nvl(a.TAXAMT, 0) TAXAMT, nvl(a.REALAMT, 0) REALAMT, nvl(a.DIFFAMT, 0) DIFFAMT, 
  a.PCARDYN, a.BILLTYPE, a.DETAILTYPE, a.DETAIL, a.ADVANCECLASS, a.SUPPLYAMTCLASS, a.RECIVEDT, a.OUTSOURCETYPE, 
  a.CONTENTS1, a.QUANTITY1, a.UNITCOST1, a.SUPPLYAMT1, a.TAXAMT1, 
  a.CONTENTS2, a.QUANTITY2, a.UNITCOST2, a.SUPPLYAMT2, a.TAXAMT2, 
  a.CONTENTS3, a.QUANTITY3, a.UNITCOST3, a.SUPPLYAMT3, a.TAXAMT3, 
  a.CONTENTS4, a.QUANTITY4, a.UNITCOST4, a.SUPPLYAMT4, a.TAXAMT4, 
  b.mainNo, b.SN, 
  b.ACCTCD, TO_ACCTNAME(b.ACCTCD) ACCTNAME,
  --b.ACCTCD, to_acctname_n(b.acctcd,a.EVENTDT) ACCTNAME,
  b.ORGCD, TO_ORGNOCD2(b.ORGCD) ORGCD_OLD, TO_ORGNONAME2(b.ORGCD) ORGNAME,
  b.JOBNO, 
  DECODE(TO_ORGNOCD2(SUBSTR(b.JOBNO,1,5)),NULL,JOBNO,TO_ORGNOCD2(SUBSTR(b.JOBNO,1,5))) JOBUSERNO, --사용자코드 추가
  TO_ORGNONAME2(SUBSTR(b.JOBNO,1,5))|| ' '|| TO_PJTOWNCD(SUBSTR(b.JOBNO,1,5)) JOBNAME, --코드명 가져오기 
  b.CDTYPE, 
  nvl(b.AMOUNT, 0) AMOUNT, b.TITLE, b.CERTIFTYPE, nvl(b.BUDGETAMT, 0) BUDGETAMT, nvl(b.BUDGETRATE, 0) BUDGETRATE, 
  b.CERTIFNO, b.CDAPPLNO, b.BUDGETUSEDAMT, b.OVERRATE, decode(c.aa01_stat,'','X',c.aa01_stat) acctStatus,
          to_orgnocd2(b.orgCd) orgUserCd, get_bizAcqOrgCd(useOrgCd) bizAcqOrgCd,get_bizAcqOrgName(useOrgCd) bizAcqOrgName,
  nvl(b.OBJ_NO,'') OBJ_NO,nvl(b.IT_NO,'') IT_NO, a.DETAIL_SUB
 FROM MASM_INHAUH.ACCTRPTHD a, MASM_INHAUH.ACCTRPTSB b, TBAA01@TO_INHAUH c
WHERE a.mainNo = b.mainNo(+)
  AND a.mainNo = ?
  AND a.docno = c.aa01_jpno(+) 
  ORDER BY TO_NUMBER( b.SN)
  	]]>
	</sql-content>
   </sql-mapping>
   <sql-mapping  id="FileUpt"   value-count="3"
   url="첨부파일 읽기" >  
   <sql-content>
   <![CDATA[
where MAINNO=?
  and ?=?
 	]]>
	</sql-content>
   </sql-mapping>
   <sql-mapping  id="GetPayDoc_DocNo"   value-count="1"
   url="지급품의 조회" >  
   <sql-content>
   <![CDATA[
  SELECT 
  a.CONF_NO, a.CONFTYPE,
  a.MAINNO, a.DOCNO, TO_CHAR(a.CREATEDTM,'YYYY-MM-DD HH24:mi:ss') CREATEDTM,
  (
  	 round(a.CREATEDTM-to_date(a.EVENTDT,'YYYYMMDD'))-
	  (
	        SELECT COUNT(C_DATE)
	        from CALENDAR
	        WHERE C_DATE LIKE TO_CHAR(a.CREATEDTM,'YYYY')||'%'
	        AND   C_DATE BETWEEN a.EVENTDT AND TO_CHAR(a.CREATEDTM,'YYYYMMDD')
	  )
  ) idays,
  a.CRORGCD, TO_ORGNONAME(a.CRORGCD) CRORGNAME, TO_ORGNOCD(a.CRORGCD) CRORGUSERCD,
  a.CREMPID,to_empGradeName(a.crEmpId) crEmpGrade, SUBSTR(a.EVENTDT,1,4)||'-'||SUBSTR(a.EVENTDT,5,2)||'-'||SUBSTR(a.EVENTDT,7,2) EVENTDT,  
  TO_EMPKNAME(a.CREMPID) CREMPNAME, 
  a.USEORGCD, TO_ORGNOCD2(a.USEORGCD) USEORGUSERCD, TO_ORGNONAME2(a.USEORGCD) USEORGNAME, 
  TO_empgradename(USEEMPID) USEEMPGrade,
  a.USEEMPID, TO_EMPKNAME(a.USEEMPID) USEEMPNAME, a.PHONNO, a.DOCTYPE, a.PAYTYPE, a.MTITLE, 
  a.STATUS, TO_STATUSNM(a.STATUS) STATUSNAME, a.BIZACQACCTCD, TO_BIZACQACCTNAME(a.BIZACQACCTCD) BIZACQNAME,
  TO_BIZACQCEONAME(a.BIZACQACCTCD) BIZCEONAME, a.BIZACQREGNO, a.DOMICILE, nvl(a.TOTAMT, 0) TOTAMT,  
  nvl(a.SUPPLYAMT, 0) SUPPLYAMT, nvl(a.TAXAMT, 0) TAXAMT, nvl(a.REALAMT, 0) REALAMT, nvl(a.DIFFAMT, 0) DIFFAMT, 
  a.PCARDYN, a.BILLTYPE, a.DETAILTYPE, a.DETAIL, a.ADVANCECLASS, a.SUPPLYAMTCLASS, a.RECIVEDT, a.OUTSOURCETYPE, 
  a.CONTENTS1, a.QUANTITY1, a.UNITCOST1, a.SUPPLYAMT1, a.TAXAMT1, 
  a.CONTENTS2, a.QUANTITY2, a.UNITCOST2, a.SUPPLYAMT2, a.TAXAMT2, 
  a.CONTENTS3, a.QUANTITY3, a.UNITCOST3, a.SUPPLYAMT3, a.TAXAMT3, 
  a.CONTENTS4, a.QUANTITY4, a.UNITCOST4, a.SUPPLYAMT4, a.TAXAMT4, 
  b.mainNo, b.SN, 
  b.ACCTCD, TO_ACCTNAME(b.ACCTCD) ACCTNAME,
  --b.ACCTCD, to_acctname_n(b.acctcd,a.EVENTDT) ACCTNAME,
  b.ORGCD, TO_ORGNOCD2(b.ORGCD) ORGCD_OLD, TO_ORGNONAME2(b.ORGCD) ORGNAME,
  b.JOBNO, 
  DECODE(TO_ORGNOCD2(SUBSTR(b.JOBNO,1,5)),NULL,JOBNO,TO_ORGNOCD2(SUBSTR(b.JOBNO,1,5))) JOBUSERNO, --사용자코드 추가
  TO_ORGNONAME2(SUBSTR(b.JOBNO,1,5))|| ' '|| TO_PJTOWNCD(SUBSTR(b.JOBNO,1,5)) JOBNAME, --코드명 가져오기 
  b.CDTYPE, 
  nvl(b.AMOUNT, 0) AMOUNT, b.TITLE, b.CERTIFTYPE, nvl(b.BUDGETAMT, 0) BUDGETAMT, nvl(b.BUDGETRATE, 0) BUDGETRATE, 
  b.CERTIFNO, b.CDAPPLNO, b.BUDGETUSEDAMT, b.OVERRATE, decode(c.aa01_stat,'','X',c.aa01_stat) acctStatus,
          to_orgnocd2(b.orgCd) orgUserCd, get_bizAcqOrgCd(useOrgCd) bizAcqOrgCd,get_bizAcqOrgName(useOrgCd) bizAcqOrgName,
  nvl(b.OBJ_NO,'') OBJ_NO,nvl(b.IT_NO,'') IT_NO, a.DETAIL_SUB
 FROM MASM_INHAUH.ACCTRPTHD a, MASM_INHAUH.ACCTRPTSB b, TBAA01@TO_INHAUH c
WHERE a.mainNo = b.mainNo(+)
  AND a.docNo = ?
  AND a.docno = c.aa01_jpno(+) 
  ORDER BY TO_NUMBER( b.SN)
  	]]>
	</sql-content>
   </sql-mapping>
   <sql-mapping  id="GetPayDocPlus"   value-count="1"
   url="지급품의 조회 Plus : OrgNo 추가 버전" >  
   <sql-content>
   <![CDATA[
SELECT a.MAINNO, a.DOCNO, TO_CHAR(a.CREATEDTM,'YYYY-MM-DD HH24:mi:ss') CREATEDTM, 
  a.CRORGCD, to_orgnocd(a.crorgcd) ORGCD_OLD, TO_ORGNONAME(a.CRORGCD) CRORGNAME, 
  a.CREMPID,to_empGradeName(a.crEmpId) crEmpGrade, SUBSTR(a.EVENTDT,1,4)||'-'||SUBSTR(a.EVENTDT,5,2)||'-'||SUBSTR(a.EVENTDT,7,2) EVENTDT,  
  TO_EMPKNAME(a.CREMPID) CREMPNAME, 
  a.USEORGCD, TO_ORGNOCD(a.USEORGCD) USEORGCD_OLD, TO_ORGNONAME(a.USEORGCD) USEORGNAME, 
  TO_empgradename(USEEMPID) USEEMPGrade,
  a.USEEMPID, TO_EMPKNAME(a.USEEMPID) USEEMPNAME, a.PHONNO, a.DOCTYPE, a.PAYTYPE, a.MTITLE, 
  a.STATUS, TO_STATUSNM(a.STATUS) STATUSNAME, a.BIZACQACCTCD, TO_BIZACQACCTNAME(a.BIZACQACCTCD) BIZACQNAME,
  TO_BIZACQCEONAME(a.BIZACQACCTCD) BIZCEONAME, a.BIZACQREGNO, a.DOMICILE, nvl(a.TOTAMT, 0) TOTAMT,  
  nvl(a.SUPPLYAMT, 0) SUPPLYAMT, nvl(a.TAXAMT, 0) TAXAMT, nvl(a.REALAMT, 0) REALAMT, nvl(a.DIFFAMT, 0) DIFFAMT, 
  a.PCARDYN, a.BILLTYPE, a.DETAILTYPE, a.DETAIL, a.ADVANCECLASS, a.SUPPLYAMTCLASS, a.RECIVEDT, a.OUTSOURCETYPE, 
  a.CONTENTS1, a.QUANTITY1, a.UNITCOST1, a.SUPPLYAMT1, a.TAXAMT1, 
  a.CONTENTS2, a.QUANTITY2, a.UNITCOST2, a.SUPPLYAMT2, a.TAXAMT2, 
  a.CONTENTS3, a.QUANTITY3, a.UNITCOST3, a.SUPPLYAMT3, a.TAXAMT3, 
  a.CONTENTS4, a.QUANTITY4, a.UNITCOST4, a.SUPPLYAMT4, a.TAXAMT4, 
  b.mainNo, b.SN, 
  b.ACCTCD, TO_ACCTNAME(b.ACCTCD) ACCTNAME,
  --b.ACCTCD, to_acctname_n(b.acctcd,a.EVENTDT) ACCTNAME, 
  b.ORGCD, TO_ORGNOCD(b.ORGCD) ORGCD_OLD, TO_ORGNONAME(b.ORGCD) ORGNAME,
  b.JOBNO, GET_JOBNAME(SUBSTR(b.JOBNO,1,5)) JOBNAME, b.CDTYPE, 
  nvl(b.AMOUNT, 0) AMOUNT, b.TITLE, b.CERTIFTYPE, nvl(b.BUDGETAMT, 0) BUDGETAMT, nvl(b.BUDGETRATE, 0) BUDGETRATE, 
  b.CERTIFNO, b.CDAPPLNO, b.BUDGETUSEDAMT, b.OVERRATE, decode(c.aa01_stat,'','X',c.aa01_stat) acctStatus
 FROM MASM_INHAUH.ACCTRPTHD a, MASM_INHAUH.ACCTRPTSB b, acct.tbaa01 c
WHERE a.mainNo = b.mainNo(+)
  AND a.mainNo = ?
  AND a.docno = c.aa01_jpno(+) 
  ORDER BY TO_NUMBER( b.SN)
  	]]>
	</sql-content>
   </sql-mapping>
   <sql-mapping  id="PayHDocUpt"   value-count="1"
   url="지급 품의 Head 정보 수정" >  
   <sql-content>
   <![CDATA[
Where mainNo = ?
	]]>
	</sql-content>
   </sql-mapping>
   <sql-mapping  id="PayDDocUpt"   value-count="2"
   url="지급 품의 detail 정보 수정" >  
   <sql-content>
   <![CDATA[
Where mainNo = ? AND SN = ?
	]]>
	</sql-content>
   </sql-mapping>
   <sql-mapping  id="PayHDocDel"   value-count="1"
   url="지급 품의 Head 정보 삭제" >  
   <sql-content>
   <![CDATA[
Delete from ACCTRPTHD
Where mainNo = ?
	]]>
	</sql-content>
   </sql-mapping>
   <sql-mapping  id="PayDDocDel"   value-count="1"
   url="지급 품의 detail 정보 삭제" >  
   <sql-content>
   <![CDATA[
Delete from ACCTRPTSB
Where mainNo = ?
	]]>
	</sql-content>
   </sql-mapping>
   <sql-mapping  id="PayDocFileDel"   value-count="1"
   url="지급 품의 첨부파일 정보 수정(삭제의미)" >  
   <sql-content>
   <![CDATA[
update FILEINFO set delFlag='Y' 
Where mainNo = ?
	]]>
	</sql-content>
   </sql-mapping>
   <sql-mapping  id="GetBudget"   value-count="2"
   url="예산읽어오기" >  
   <sql-content>
   <![CDATA[
select  a.YYYY, a.ORGCD, TO_ORGCDNAME(a.ORGCD) ORGNAME, a.ACCTCD, TO_ACCTNAME(a.ACCTCD) ACCTNAME, 
EXECBUDGET01, REMBUDGET01, USEDBUDGET01, FINISHFLAG01, 
EXECBUDGET02, REMBUDGET02, USEDBUDGET02, FINISHFLAG02, 
EXECBUDGET03, REMBUDGET03, USEDBUDGET03, FINISHFLAG03, 
EXECBUDGET04, REMBUDGET04, USEDBUDGET04, FINISHFLAG04, 
EXECBUDGET05, REMBUDGET05, USEDBUDGET05, FINISHFLAG05, 
EXECBUDGET06, REMBUDGET06, USEDBUDGET06, FINISHFLAG06, 
EXECBUDGET07, REMBUDGET07, USEDBUDGET07, FINISHFLAG07, 
EXECBUDGET08, REMBUDGET08, USEDBUDGET08, FINISHFLAG08, 
EXECBUDGET09, REMBUDGET09, USEDBUDGET09, FINISHFLAG09, 
EXECBUDGET10, REMBUDGET10, USEDBUDGET10, FINISHFLAG10, 
EXECBUDGET11, REMBUDGET11, USEDBUDGET11, FINISHFLAG11, 
EXECBUDGET12, REMBUDGET12, USEDBUDGET12, FINISHFLAG12, 
a.CREATEDT, a.LASTUPDTM, a.LASTUPEMPID, TO_EMPKNAME(a.LASTUPEMPID) EMPNAME, TO_empgradename(a.LASTUPEMPID) EMPGRADE, 
b.STARTDT, b.ENDDT, b.ACCTFLAG, b.TERMTYPE, b.OVERRATE, b.APPLRATE, b.PROCTYPE, b.ORGUSEFLAG, 
b.MAINORGCD, TO_ORGCDNAME(b.MAINORGCD) MAINORGNAME, b.CRUPDATEDT, b.conType,
        b.MAINORGCD orgCd
from budget a, budgetcriterion b
where a.YYYY = ?
AND a.ACCTCD = b.ACCTCD
AND b.ENDDT >= ?
AND ( a.AcctCD, a.ORGCD ) in (
	]]>
	</sql-content>
   </sql-mapping>
   <sql-mapping  id="GetBudgetCon"   value-count="1"
   url="예산 통제값 읽어오기" >  
   <sql-content>
   <![CDATA[
select  b.STARTDT, b.ENDDT, b.ACCTCD, b.ACCTFLAG, b.TERMTYPE, b.OVERRATE, b.APPLRATE, b.PROCTYPE, b.ORGUSEFLAG, 
NVL(b.MAINORGCD,' ') MAINORGCD, TO_ORGCDNAME(b.MAINORGCD) MAINORGNAME, b.CRUPDATEDT, b.conType,
        b.MAINORGCD orgCd
from budgetcriterion b
where b.ENDDT >= ?
	]]>
	</sql-content>
   </sql-mapping>
   <sql-mapping  id="UptBudgetDoc"   value-count="3"
   url="예산 수정" >  
   <sql-content>
   <![CDATA[
 WHERE  YYYY = ? AND ORGCD = ? AND ACCTCD = ?
	]]>
	</sql-content>
   </sql-mapping>
   <sql-mapping  id="UptBudgetDetail"   value-count="3"
   url="예산 수정" >  
   <sql-content>
   <![CDATA[
 WHERE  YYYY = ? AND ORGCD = ? AND DACCTCD = ?
	]]>
	</sql-content>
   </sql-mapping>
   <sql-mapping  id="TempClob"   value-count="0"
   url="결재등록" >  
   <sql-content>
   <![CDATA[
SELECT tmBody FROM TEMPCLOB
	]]>
	</sql-content>
   </sql-mapping>
   <sql-mapping  id="RegDocApprInfo"   value-count="3"
   url="결재등록" >  
   <sql-content>
   <![CDATA[
INSERT INTO  MASM_INHAUH.DOCAPPRINFO
 VALUES( ?, ?, sysDate, ?, empty_clob())
	]]>
	</sql-content>
   </sql-mapping>
   <sql-mapping  id="ViewHead"   value-count="30"
   url="결재 연동Head" >  
   <sql-content>
   <![CDATA[
<head>
<meta http-equiv='Content-Language' content='ko'>
<meta http-equiv='Content-Type' content='text/html; charset=ks_c_5601-1987'>
<LINK rel='stylesheet' type='text/css' href='../css/skin04_form.css'>
<script language='javascript'>
function download(dir,fileSystemName,fileOriginName, empId){
	location.href="?;			
}
</script>
<title>품의서</title>
</head>
<body text='#000000' bgcolor='#FFFFFF' topmargin=0 leftmargin=0 rightmargin=0>
<form  name='bizForm' method='POST'  >
<input type='hidden' name='_SCREEN' >
<input type='hidden' name='empId' value='?'>
<input type='hidden' name='status'>
<input type='hidden' name='mainNo' value='?'>
<input type='hidden' name='docType' value='?'>
<input type='hidden' name='payType' value='?'>
<table align='center' cellpadding='1' cellspacing='1' border='0' class='table1' width='712' id='table2' height='24'>
	<tr>
		<td width='10%' class='td1' align='center' height='22'>기안자</td>
		<td width='60%' class='td2' align='left' height='22'>&nbsp;? ?  / ?</td>
		<td width='10%' class='td1' align='center' height='22'>작성일</td>
		<td width='20%' class='td2' align='left' height='22'>&nbsp;?</td>
	</tr>
</table>
<table><tr><td></td></tr></table>
<table align='center' cellpadding='1' cellspacing='1' border='0' class='table1' width='712' id='table3' height='24'>
	<tr>
		<td width='10%' class='td1' align='center' height='24'>부서/PJT명</td>
		<td width='60%' class='td2' align='left' height='24' colspan='3'>&nbsp;? ?</td>
		<td width='10%' class='td1' align='left' height='24'>증빙구분</td>
		<td width='20%' class='td2' align='left' height='24'>&nbsp;? </td>
	</tr>
	<tr>
		<td width='10%' class='td1' align='center' height='24'>발생일자</td>
		<td width='25%' class='td2' align='left' height='24'>&nbsp;<b>?</b></td>
		<td width='10%' class='td1' align='center' height='24'>사용자</td>
		<td width='25%' class='td2' align='left' height='24'>&nbsp;? ?</td>
		<td width='10%' class='td1' align='left' height='24'>전화번호</td>
		<td width='20%' class='td2' align='left' height='24'>&nbsp;?</td>
	</tr>
	<tr>
		<td width='10%' class='td1' align='center' height='24'>거래처명</td>
		<td width='60%' class='td2' align='left' height='24' colspan='3'>&nbsp;? ? (?) ?</td>
		<td width='10%' class='td1' align='left' height='24'>지급처</td>
		<td width='20%' class='td2' align='left' height='24'>&nbsp;?</td>
	</tr>
</table>	
<table><tr><td></td></tr></table>
<table align='center' cellpadding='1' cellspacing='1' border='0' class='table1' width='712' id='table4' height='225'>
	<tr>
		<td width='10%' class='td1' align='left' height='24'>가지급정산</td>
		<td width='25%' class='td2' align='left' height='24'>&nbsp;?</td>
		<td width='10%' class='td1' align='left' height='24'>공급가액</td>
		<td width='25%' class='td2' align='right' height='24'>? 원&nbsp;</td>
		<td width='10%' class='td1' align='left' height='24'>부가세</td>
		<td width='20%' class='td2' align='right' height='24'>? 원&nbsp;</td>
	</tr>
	<tr>
		<td width='10%' class='td1' align='center' height='24'>지급총액</td>
		<td width='25%' class='td2' align='right' height='24'>? 원&nbsp;</td>
		<td width='10%' class='td1' align='center' height='24'>실지급액</td>
		<td width='25%' class='td2' align='right' height='24'><b>? 원</b>&nbsp;</td>
		<td width='10%' class='td1' align='left' height='24'>차인액</td>
		<td width='20%' class='td2' align='right' height='24'><b>? 원</b>&nbsp;</td>
	</tr>
	<tr>
		<td width='10%' class='td1' align='center' height='24'>제목</td>
		<td width='60%' class='td2' align='left' height='24' colspan='3'>&nbsp;?
		<td width='30%' class='td2' height='24' colspan='2'>?</td>
	</tr>
	<tr>
		<td width='10%' class='td1' align='center' height='123'>지급내역</td>
		<td width='80%' class='td2' align='left' height='123' colspan='5' valign="top">?</td>
	</tr>
</table>	
<table cellpadding=1 cellspacing=1 border=0 class='td7' width='712'  id='table6' align=center height='26' >
	<tr height=24 valign=middle >
		<td align='center' bgcolor=#336699 width='15%' height='26'>
			<font color='#FFFFFF'><b>회계처리 내용</b></font></td>
		<td width='75%' height='22' valign=bottom></td>
	</tr>
</table>
<Table align='center' cellpadding='1' cellspacing='1' border='0' class='table1' width='712' id='table7' height='24'>
	<tr>
		<td width='3%'  class=TD1 rowspan='2'>NO</td>
		<td width='23%' class=TD1 height='24'>회계계정코드</td>
		<td width='25%' class=TD1>회계(예산)부서</td>
		<td width='10%' class=TD1>차대구분</td>
		<td width='10%' class=TD1>예산금액</td>
		<td width='12%' class=TD1>집행금액</td>
		<td width='10%' class=TD1>집행누계</td>
		<td width='9%' class=TD1>집행률</td>
	</tr>
	<tr>
		<td width='23%' class=TD1 height='24'>원가귀속부서</td>
		<td width='35%' class=TD1 colspan='2'>개요</td>
		<td width='38%' class=TD1 colspan='4'>NO.(보험증권/카드/LC/가지급)</td>
	</tr>
</table>
	]]>
	</sql-content>
   </sql-mapping>
   <sql-mapping  id="ViewHead2"   value-count="31"
   url="결재 연동Head" >  
   <sql-content>
   <![CDATA[
<head>
<meta http-equiv='Content-Language' content='ko'>
<meta http-equiv='Content-Type' content='text/html; charset=ks_c_5601-1987'>
<LINK rel='stylesheet' type='text/css' href='../css/skin04_form.css'>
<script language='javascript'>
function download(dir,fileSystemName,fileOriginName, empId){
	location.href="?;			
}
</script>
<title>품의서</title>
</head>
<body text='#000000' bgcolor='#FFFFFF' topmargin=0 leftmargin=0 rightmargin=0>
<form  name='bizForm' method='POST'  >
<input type='hidden' name='_SCREEN' >
<input type='hidden' name='empId' value='?'>
<input type='hidden' name='status'>
<input type='hidden' name='mainNo' value='?'>
<input type='hidden' name='docType' value='?'>
<input type='hidden' name='payType' value='?'>
<table align='center' cellpadding='1' cellspacing='1' border='0' class='table1' width='712' id='table2' height='24'>
	<tr>
		<td width='10%' class='td1' align='center' height='22'>기안자</td>
		<td width='60%' class='td2' align='left' height='22'>&nbsp;? ?  / ?</td>
		<td width='10%' class='td1' align='center' height='22'>작성일</td>
		<td width='20%' class='td2' align='left' height='22'>&nbsp;?</td>
	</tr>
</table>
<table><tr><td></td></tr></table>
<table align='center' cellpadding='1' cellspacing='1' border='0' class='table1' width='712' id='table3' height='24'>
	<tr>
		<td width='10%' class='td1' align='center' height='24'>부서/PJT명</td>
		<td width='60%' class='td2' align='left' height='24' colspan='3'>&nbsp;? ?</td>
		<td width='10%' class='td1' align='left' height='24'>증빙구분</td>
		<td width='20%' class='td2' align='left' height='24'>&nbsp;? </td>
	</tr>
	<tr>
		<td width='10%' class='td1' align='center' height='24'>발생일자</td>
		<td width='25%' class='td2' align='left' height='24'>&nbsp;<b>?</b></td>
		<td width='10%' class='td1' align='center' height='24'>사용자</td>
		<td width='25%' class='td2' align='left' height='24'>&nbsp;? ?</td>
		<td width='10%' class='td1' align='left' height='24'>전화번호</td>
		<td width='20%' class='td2' align='left' height='24'>&nbsp;?</td>
	</tr>
	<tr>
		<td width='10%' class='td1' align='center' height='24'>거래처명</td>
		<td width='60%' class='td2' align='left' height='24' colspan='3'>&nbsp;? ? (?) ?</td>
		<td width='10%' class='td1' align='left' height='24'>지급처</td>
		<td width='20%' class='td2' align='left' height='24'>&nbsp;?</td>
	</tr>
</table>	
<table><tr><td></td></tr></table>
<table align='center' cellpadding='1' cellspacing='1' border='0' class='table1' width='712' id='table4' height='225'>
	<tr>
		<td width='10%' class='td1' align='left' height='24'>가지급정산</td>
		<td width='25%' class='td2' align='left' height='24'>&nbsp;?</td>
		<td width='10%' class='td1' align='left' height='24'>공급가액</td>
		<td width='25%' class='td2' align='right' height='24'>? 원&nbsp;</td>
		<td width='10%' class='td1' align='left' height='24'>부가세</td>
		<td width='20%' class='td2' align='right' height='24'>? 원&nbsp;</td>
	</tr>
	<tr>
		<td width='10%' class='td1' align='center' height='24'>지급총액</td>
		<td width='25%' class='td2' align='right' height='24'>? 원&nbsp;</td>
		<td width='10%' class='td1' align='center' height='24'>실지급액</td>
		<td width='25%' class='td2' align='right' height='24'><b>? 원</b>&nbsp;</td>
		<td width='10%' class='td1' align='left' height='24'>차인액</td>
		<td width='20%' class='td2' align='right' height='24'><b>? 원</b>&nbsp;</td>
	</tr>
	<tr>
		<td width='10%' class='td1' align='center' height='24'>제목</td>
		<td width='60%' class='td2' align='left' height='24' colspan='3'>&nbsp;?
		<td width='30%' class='td2' height='24' colspan='2'>?</td>
	</tr>
	<tr>
		<td width='10%' class='td1' align='center' height='123'>지급내역</td>
		<td width='80%' class='td2' align='left' height='123' colspan='5' valign="top">?</td>
	</tr>
	<tr>
		<td width='10%' class='td1' align='center' height='40'>상세내역</td>
		<td width='80%' class='td2' align='left' height='40' colspan='5' valign="top">?</td>
	</tr>
</table>	
<table cellpadding=1 cellspacing=1 border=0 class='td7' width='712'  id='table6' align=center height='26' >
	<tr height=24 valign=middle >
		<td align='center' bgcolor=#336699 width='15%' height='26'>
			<font color='#FFFFFF'><b>회계처리 내용</b></font></td>
		<td width='75%' height='22' valign=bottom></td>
	</tr>
</table>
<Table align='center' cellpadding='1' cellspacing='1' border='0' class='table1' width='712' id='table7' height='24'>
	<tr>
		<td width='3%'  class=TD1 rowspan='2'>NO</td>
		<td width='23%' class=TD1 height='24'>회계계정코드</td>
		<td width='25%' class=TD1>회계(예산)부서</td>
		<td width='10%' class=TD1>차대구분</td>
		<td width='10%' class=TD1>예산금액</td>
		<td width='12%' class=TD1>집행금액</td>
		<td width='10%' class=TD1>집행누계</td>
		<td width='9%' class=TD1>집행률</td>
	</tr>
	<tr>
		<td width='23%' class=TD1 height='24'>원가귀속부서</td>
		<td width='35%' class=TD1 colspan='2'>개요</td>
		<td width='38%' class=TD1 colspan='4'>NO.(보험증권/카드/LC/가지급)</td>
	</tr>
</table>
	]]>
	</sql-content>
   </sql-mapping>
   <sql-mapping  id="ViewBody"  value-count="18"
   url="결재 연동 회계정보" >  
   <sql-content>
   <![CDATA[
<input type='hidden' name='mainNo' value='?'>
<input type='hidden' name='sn' value='?'>
<table align='center' cellpadding='1' cellspacing='1' border='0' class='table1' width='712' id='table7' height='24'>
	<tr>
		<td width='3%' class=TD2 rowspan='2' style='background-color: #FFFFFF' align=center>?</td>
		<td width='23%' class='td2' align='left' height='24'>&nbsp;? ?</td>
		<td width='25%' class='td2' align='left' height='24'>&nbsp;? ?</td>
		<td width='10%' class='td2' align='center' height='24'>?</td>
		<td width='10%' class='td2' align='right' height='24'>? 원&nbsp;</td>
		<td width='12%' class='td2' align='right' height='24'>? 원&nbsp;</td>
		<td width='10%' class='td2' align='right' height='24'>? 원&nbsp;</td>
		<td width='9%' class='td2' align='right' height='24'>? %&nbsp;</td>
	</tr>
		<tr>
		<td width='23%' class='td2' align='left' height='24'>&nbsp;? ?</td>
		<td width='35%' class='td2' align='left' height='24' colspan='2'>&nbsp;?</td>
		<td width='38%' class='td2' align='left' height='24' colspan='4'>&nbsp;?&nbsp;?&nbsp;?</td>
	</tr>
</table>	
	]]>
	</sql-content>
   </sql-mapping>
   <sql-mapping  id="ViewFiles"  value-count="5"
   url="결재 연동첨부파일" >  
   <sql-content>
   <![CDATA[
	<tr>
		<td width='10%' class='td3' align='center' height='24'>첨부자료</td>
		<td width='90%' class='td2' align='left' height='24' colspan='3'>			
			<a href="javascript:download(?,?,?,?)">
			?</a>	
		</td>
	</tr>	
	]]>
	</sql-content>
   </sql-mapping>
   <sql-mapping  id="delDocApplInfo"   value-count="1"
   url="지급 품의 이미지 정보 삭제" >  
   <sql-content>
   <![CDATA[
delete DOCAPPRINFO 
Where docNo = ?
	]]>
	</sql-content>
   </sql-mapping>
   <sql-mapping  id="SearchProd"  value-count="3"
   url="제품읽어오기" >  
   <sql-content>
   <![CDATA[
select a.prodno,a.prodtype,a.prodname,a.bizno,a.bizacqcd,a.orgcd,a.contno,
a.delidt,a.contamt, a.goalprofitrate, a.contmh, a.goalmh, a.rsltmh, 
to_char(a.lasstatusdtm,'YYYY-MM-DD hh24:mi:ss') lasstatusdtm, a.actorgcd, 
a.materm, a.penaltyrate, a.agenda, a.prodsyncdtm, a.crempid, a.curempid, a.pmempid,
a.saleempid, a.subwrempid, a.prodstatus, a.prcstype, a.contstartdt, a.contenddt, 
a.plstartdt, a.plenddt, a.realstartdt, a.expectcost, a.expectpnl, a.contDt 
 from prod a 
where prodtype||prodno like ? 
and prodName like ?
and orgCd = ?
and prodstatus <> '제품종료'
order by prodtype, prodno desc 
	]]>
	</sql-content>
   </sql-mapping>
   <sql-mapping  id="SearchOrg"  value-count="4"
   url="제품읽어오기" >  
   <sql-content>
   <![CDATA[
select a.orgCd, a.orgName,a.Highorgcd,a.labCostType,a.bizno,a.endDt
 from org a 
where orgcd like ? 
and orgName like ?
and startDt <= ? and enddt >= ?
and substr(orgCd,1,1) = 'C'
order by orgCd desc 
	]]>
	</sql-content>
   </sql-mapping>
   <sql-mapping  id="SearchTask"   value-count="2"
   url="타스크읽어오기" >  
   <sql-content>
   <![CDATA[
	]]>
	</sql-content>
   </sql-mapping>


   <sql-mapping  id="PD_001"   value-count="0"
   url="전표 조회" >  
   <sql-content>
   <![CDATA[
	SELECT
           AA12_JPNO AS DOCNO,
           TO_CHAR(TO_DATE(D.AA12_DATE,'YYYYMMDD'),'YYYY-MM-DD') AS CREATEDTM,
           TO_ORGCDNO_N(AA11_JBSCD,SUBSTR(AA12_JPNO,2,6)) AS CRORGCD,
           TO_ORGCDNAME_N(AA11_JBSCD,SUBSTR(AA12_JPNO,2,6)) AS CRORGNAME,
           AA11_JBSCD AS  CRORGUSERCD,
           AA11_JSBN AS  CREMPID,
           TO_EMPGRADENAME(AA11_JSBN) CREMPGRADE,
           TO_CHAR(TO_DATE(AA11_JSIL,'YYYYMMDD'),'YYYY-MM-DD') AS  EVENTDT,
           TO_EMPKNAME(AA11_JSBN) CREMPNAME,
           TO_ORGCDNO_N(AA11_JBSCD,SUBSTR(AA12_JPNO,2,6)) AS USEORGCD,
           AA11_JBSCD AS  USEORGUSERCD,
           TO_ORGCDNAME_N(AA11_JBSCD,SUBSTR(AA12_JPNO,2,6)) USEORGNAME,
           TO_EMPGRADENAME(AA11_SSBN) USEEMPGRADE,
           AA11_SSBN AS USEEMPID,
           TO_EMPKNAME(AA11_SSBN) USEEMPNAME,
           AA11_DPJYO AS MTITLE,
           DECODE(AA11_STAT,'H','DE0','M','DD1') AS STATUS,
           TO_STATUSNM(DECODE(AA11_STAT,'H','DE0','M','DD1')) STATUSNAME,
           AA11_AMT AS AMT,
           NVL(AA12_AMT, 0) AS DAMT,
           AA12_HGNO AS SN,
           AA12_GJCD AS ACCTCD,
           (SELECT AZ01_GJNM FROM TBAZ01@TO_INHAUH
       		WHERE AZ01_GJCD = AA12_GJCD)AS ACCTNAME,
           AA12_CDGB AS CDTYPE,
           NVL(AA12_AMT, 0) AMOUNT,
	 	  DECODE(AA12_CDGB,'C',DECODE(AA12_CDGB,'C',AA12_AMT),0) AS C_AMT,
	 	  DECODE(AA12_CDGB,'D',DECODE(AA12_CDGB,'D',AA12_AMT),0) AS D_AMT,           
           AA12_JYO AS TITLE,
           AA12_CUST_CD AS CUST_CD,
           AA12_CUST_NM AS CUST_NAME,
           AA12_BSCD AS BSCD,
           TO_ORGCDNAME_N(AA12_BSCD,SUBSTR(AA12_JPNO,2,6)) AS BSCD_NAME,
           (SELECT JOBNO FROM ACCTRPTSB
           WHERE  D.AA12_JPNO=MAINNO
           AND    D.AA12_HGNO=SN ) AS JOBNO,
           TO_ORGNOCD2((SELECT JOBNO FROM ACCTRPTSB
              WHERE  D.AA12_JPNO=MAINNO
              AND    D.AA12_HGNO=SN )) AS JOBCD,
           TO_ORGNONAME2((SELECT JOBNO FROM ACCTRPTSB
              WHERE  D.AA12_JPNO=MAINNO
              AND    D.AA12_HGNO=SN )) AS JOBNAME,
           AA12_JJNO AS JJNO,
           DECODE(C.AA11_STAT,'','X',C.AA11_STAT) AS ACCTSTATUS,
		  SUM(DECODE(AA12_CDGB,'C',AA12_AMT)) OVER() AS TC_AMT,
		  SUM(DECODE(AA12_CDGB,'D',AA12_AMT)) OVER() AS TD_AMT
	FROM	TBAA11@TO_INHAUH C,
			TBAA12@TO_INHAUH D
	WHERE 	C.AA11_JPNO=D.AA12_JPNO
	AND  	C.AA11_JPNO=DOCNO:

  	]]>
	</sql-content>
   </sql-mapping>
   
</sql>
